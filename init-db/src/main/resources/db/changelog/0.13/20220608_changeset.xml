<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
	  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <changeSet id="V0.13-20220608-001" author="Shawn" labels="finance">
        <comment>订阅计费系统-订阅套餐表</comment>
        <sql>
            CREATE TABLE `${table.prefix}billing_bundle` (
                `id` bigint unsigned NOT NULL COMMENT '主键',
                `space_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '空间ID',
                `bundle_id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '订阅套餐ID',
                `state` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '状态(active, expire)',
                `start_date` datetime NOT NULL COMMENT '开始时间',
                `end_date` datetime NOT NULL COMMENT '结束时间',
                `is_deleted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '删除标记(0:否,1:是)',
                `created_by` bigint NOT NULL COMMENT '创建者',
                `updated_by` bigint NOT NULL COMMENT '最后修改者',
                `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
                `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
                PRIMARY KEY (`id`) USING BTREE,
                KEY `idx_space_id` (`space_id`),
                KEY `idx_bundle_id` (`bundle_id`)
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='订阅计费系统-订阅套餐表';
        </sql>
    </changeSet>
    <changeSet id="V0.13-20220608-002" author="Shawn" labels="finance">
        <comment>订阅计费系统-订阅表</comment>
        <sql>
            CREATE TABLE `${table.prefix}billing_subscription` (
                `id` bigint unsigned NOT NULL COMMENT '主键',
                `space_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '空间ID',
                `bundle_id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '订阅套餐ID',
                `subscription_id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '订阅ID',
                `product_name` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '产品ID',
                `product_category` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '产品类型',
                `plan_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '产品方案ID',
                `state` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '状态(active, expire)',
                `phase` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT 'fixedterm' COMMENT '项目阶段(trial:试用,fixedterm:固定期限)',
                `bundle_start_date` datetime NOT NULL COMMENT '订阅套餐开始时间',
                `start_date` datetime NOT NULL COMMENT '开始时间',
                `expire_date` datetime NOT NULL COMMENT '过期时间',
                `is_deleted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '删除标记(0:否,1:是)',
                `created_by` bigint NOT NULL COMMENT '创建者',
                `updated_by` bigint NOT NULL COMMENT '最后修改者',
                `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
                `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
                PRIMARY KEY (`id`) USING BTREE,
                KEY `idx_space_id` (`space_id`),
                KEY `idx_subscription_id` (`subscription_id`),
                KEY `idx_bundle_id` (`bundle_id`) USING BTREE
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='订阅计费系统-订阅表';
        </sql>
    </changeSet>
    <changeSet id="V0.13-20220608-003" author="Shawn" labels="finance">
        <comment>订阅计费系统-订单表</comment>
        <sql>
            CREATE TABLE `${table.prefix}billing_order` (
                `id` bigint NOT NULL COMMENT '主键',
                `space_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '空间站ID',
                `order_id` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '订单号',
                `order_channel` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'vika' COMMENT '订单渠道(vika,lark,dingtalk,wecom)',
                `channel_order_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '其他渠道订单号',
                `order_type` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT '0' COMMENT '订单类型(BUY: 普通, UPGRADE: 升级, RENEW: 续订)',
                `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO货币代码(大写字母)',
                `original_amount` int unsigned NOT NULL DEFAULT '0' COMMENT '订单总金额(对应币种的最小货币单位,人民币为分)',
                `discount_amount` int unsigned NOT NULL DEFAULT '0' COMMENT '优惠总金额(对应币种的最小货币单位,人民币为分)',
                `amount` int unsigned NOT NULL DEFAULT '0' COMMENT '订单支付金额(对应币种的最小货币单位,人民币为分)',
                `state` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '订单状态(待支付-created,已支付-paid,已退款-refunded,已取消-canceled)',
                `created_time` datetime NOT NULL COMMENT '订单创建时间',
                `is_paid` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '是否已支付(0:否,1:是)',
                `paid_time` timestamp NULL DEFAULT NULL COMMENT '订单支付完成时间',
                `remark` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',
                `is_deleted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '删除标记(0:否,1:是)',
                `version` int unsigned NOT NULL DEFAULT '0' COMMENT '乐观锁版本号',
                `created_by` bigint NOT NULL COMMENT '创建者',
                `updated_by` bigint NOT NULL COMMENT '最后修改者',
                `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
                `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
                PRIMARY KEY (`id`) USING BTREE,
                UNIQUE KEY `uk_order_id` (`order_id`) USING BTREE,
                KEY `k_space_id` (`space_id`) USING BTREE
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='订阅计费系统-订单表';
        </sql>
    </changeSet>
    <changeSet id="V0.13-20220608-004" author="Shawn" labels="finance">
        <comment>订阅计费系统-订单项目表</comment>
        <sql>
            CREATE TABLE `${table.prefix}billing_order_item` (
                `id` bigint NOT NULL COMMENT '主键',
                `space_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '空间标识',
                `order_id` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '订单号',
                `product_name` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '产品名称',
                `product_category` varchar(10) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '产品类型',
                `plan_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '方案',
                `seat` int DEFAULT NULL COMMENT '席位',
                `months` int DEFAULT NULL COMMENT '月数',
                `subscription_id` varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '订阅ID',
                `start_date` datetime DEFAULT NULL COMMENT '开始日期',
                `end_date` datetime DEFAULT NULL COMMENT '结束日期',
                `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO货币代码(大写字母)',
                `amount` int NOT NULL COMMENT '付费方案金额(单位:分)',
                `item_details` json DEFAULT NULL COMMENT '详情数据',
                `remark` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '备注',
                `is_deleted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '删除标记(0:否,1:是)',
                `created_by` bigint NOT NULL COMMENT '创建者',
                `updated_by` bigint NOT NULL COMMENT '最后修改者',
                `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
                `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
                PRIMARY KEY (`id`) USING BTREE,
                KEY `k_space_id` (`space_id`) USING BTREE,
                KEY `k_order_id` (`order_id`) USING BTREE
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='订阅计费系统-订单项目表';
        </sql>
    </changeSet>
    <changeSet id="V0.13-20220608-005" author="Shawn" labels="finance">
        <comment>订阅计费系统-订单自定义键值对参数表</comment>
        <sql>
            CREATE TABLE `${table.prefix}billing_order_metadata` (
                `id` bigint unsigned NOT NULL COMMENT '主键',
                `order_id` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '订单号',
                `order_channel` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL DEFAULT 'vika' COMMENT '订单渠道',
                `metadata` json NOT NULL COMMENT '元数据',
                `is_deleted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '删除标记(0:否,1:是)',
                `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
                `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
                PRIMARY KEY (`id`) USING BTREE,
                UNIQUE KEY `uk_order_id` (`order_id`) USING BTREE
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='订阅计费系统-订单自定义键值对参数表';
        </sql>
    </changeSet>
    <changeSet id="V0.13-20220608-006" author="Shawn" labels="finance">
        <comment>订阅计费系统-订单交易表</comment>
        <sql>
            CREATE TABLE `${table.prefix}billing_order_payment` (
                `id` bigint NOT NULL COMMENT '主键',
                `order_id` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '订单号',
                `payment_transaction_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '支付交易号',
                `currency` varchar(3) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ISO货币代码(大写字母)',
                `amount` int unsigned NOT NULL DEFAULT '0' COMMENT '金额(对应币种的最小货币单位,人民币为分)',
                `subject` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '第三方支付商品标题',
                `pay_channel` varchar(20) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '支付渠道属性值',
                `pay_channel_transaction_id` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '支付渠道交易标识',
                `paid_time` datetime DEFAULT NULL COMMENT '付款时间',
                `payment_success` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '是否付款成功(0:否,1:是)',
                `raw_data` json DEFAULT NULL COMMENT '支付回调通知源数据',
                `remark` varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '描述',
                `is_deleted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '删除标记(0:否,1:是)',
                `version` int unsigned NOT NULL DEFAULT '0' COMMENT '乐观锁版本号',
                `created_by` bigint NOT NULL COMMENT '创建者',
                `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
                `updated_by` bigint NOT NULL COMMENT '最后修改者',
                `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
                PRIMARY KEY (`id`) USING BTREE,
                UNIQUE KEY `uk_payment_transaction_id` (`payment_transaction_id`) USING BTREE,
                KEY `k_order_id` (`order_id`) USING BTREE
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='订阅计费系统-订单交易表';
        </sql>
    </changeSet>
    <changeSet id="V0.13-20220608-007" author="Shawn" labels="finance">
        <comment>订阅计费系统-钉钉商店渠道订单表</comment>
        <sql>
            CREATE TABLE `${table.prefix}billing_social_dingtalk_order` (
                `id` bigint NOT NULL COMMENT '主键',
                `app_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '应用标识',
                `tenant_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '租户标识',
                `order_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '钉钉的订单号',
                `item_code` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '商品sku',
                `order_data` json NOT NULL COMMENT '订单事件数据',
                `status` tinyint unsigned DEFAULT '0' COMMENT '是否已处理(0:否,1:是)',
                `is_deleted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '删除标记(0:否,1:是)',
                `created_by` bigint NOT NULL COMMENT '创建者',
                `updated_by` bigint NOT NULL COMMENT '最后修改者',
                `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
                `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
                PRIMARY KEY (`id`) USING BTREE,
                KEY `idx_tenant_app` (`tenant_id`,`app_id`) USING BTREE COMMENT '钉钉商户应用索引',
                KEY `idx_order_id` (`order_id`) USING BTREE COMMENT '钉钉商户订单索引'
              ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='订阅计费系统-钉钉商店渠道订单表';
        </sql>
    </changeSet>
    <changeSet id="V0.13-20220608-008" author="Shawn" labels="finance">
        <comment>订阅计费系统-钉钉渠道退款订单表</comment>
        <sql>
            CREATE TABLE `${table.prefix}billing_social_dingtalk_refund` (
                `id` bigint NOT NULL COMMENT '主键',
                `app_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '应用标识',
                `tenant_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '租户标识',
                `order_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '钉钉的订单号',
                `item_code` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '退款SKU商品',
                `refund_data` json NOT NULL COMMENT '订单事件数据',
                `status` tinyint unsigned DEFAULT '0' COMMENT '是否已处理(0:否,1:是)',
                `is_deleted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '删除标记(0:否,1:是)',
                `created_by` bigint NOT NULL COMMENT '创建者',
                `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
                `updated_by` bigint NOT NULL COMMENT '最后修改者',
                `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
                PRIMARY KEY (`id`) USING BTREE,
                KEY `idx_tenant_app` (`tenant_id`,`app_id`) USING BTREE,
                KEY `k_order_id` (`order_id`) USING BTREE
              ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='订阅计费系统-钉钉商店渠道退款订单表';
        </sql>
    </changeSet>
    <changeSet id="V0.13-20220608-009" author="Shawn" labels="finance">
        <comment>订阅计费系统-飞书商店渠道订单表</comment>
        <sql>
            CREATE TABLE `${table.prefix}billing_social_feishu_order` (
                `id` bigint NOT NULL COMMENT '主键',
                `app_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '应用标识',
                `tenant_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '租户标识',
                `order_id` varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '飞书的订单号',
                `order_data` json NOT NULL COMMENT '订单事件数据',
                `status` tinyint unsigned DEFAULT '0' COMMENT '是否已处理(0:否,1:是)',
                `is_deleted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '删除标记(0:否,1:是)',
                `created_by` bigint NOT NULL COMMENT '创建者',
                `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
                `updated_by` bigint NOT NULL COMMENT '最后修改者',
                `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
                PRIMARY KEY (`id`) USING BTREE,
                KEY `idx_tenant_app_id` (`tenant_id`,`app_id`) USING BTREE COMMENT '企业和应用的联合索引',
                KEY `idx_order_id` (`tenant_id`,`app_id`) USING BTREE COMMENT '飞书订单索引'
              ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='订阅计费系统-飞书商店渠道订单表';
        </sql>
    </changeSet>
    <changeSet id="V0.13-20220608-010" author="Shawn" labels="finance">
        <comment>订阅计费系统-企微商店渠道订单表</comment>
        <sql>
            CREATE TABLE `${table.prefix}billing_social_wecom_order` (
                `id` bigint NOT NULL COMMENT '主键',
                `order_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '企业微信的订单号',
                `order_status` tinyint(1) NOT NULL COMMENT '订单状态。0:待支付;1:已支付;2:已取消;3:支付过期;4:申请退款中;5:退款成功;6:退款被拒绝',
                `order_type` tinyint(1) NOT NULL COMMENT '订单类型。0:新购应用;1:扩容应用人数;2:续期应用时间;3:变更版本',
                `paid_corp_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '下单的企业 ID',
                `operator_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '下单操作人员 userid。如果是服务商代下单，没有该字段',
                `suite_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '应用套件 ID',
                `edition_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '购买的应用版本 ID',
                `price` int NOT NULL COMMENT '应付价格。单位：分',
                `user_count` bigint NOT NULL COMMENT '购买的人数',
                `order_period` int NOT NULL COMMENT '购买的时长。单位：天',
                `order_time` datetime DEFAULT NULL COMMENT '下单时间',
                `paid_time` datetime DEFAULT NULL COMMENT '付款时间',
                `begin_time` datetime DEFAULT NULL COMMENT '购买生效期的开始时间',
                `end_time` datetime DEFAULT NULL COMMENT '购买生效期的结束时间',
                `order_from` tinyint(1) NOT NULL COMMENT '下单来源。0:企业下单;1:服务商代下单;2:代理商代下单',
                `operator_corp_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '下单方的企业 ID',
                `service_share_amount` int DEFAULT NULL COMMENT '服务商分成金额。单位：分',
                `platform_share_amount` int DEFAULT NULL COMMENT '平台分成金额。单位：分',
                `dealer_share_amount` int DEFAULT NULL COMMENT '代理商分成金额。单位：分',
                `dealer_corp_id` varchar(32) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT '代理商的企业 ID',
                `order_info` json NOT NULL COMMENT '订单原始数据',
                `is_deleted` tinyint unsigned NOT NULL DEFAULT '0' COMMENT '删除标记(0:否,1:是)',
                `created_by` bigint NOT NULL COMMENT '创建者',
                `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
                `updated_by` bigint NOT NULL COMMENT '最后修改者',
                `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
                PRIMARY KEY (`id`) USING BTREE,
                UNIQUE KEY `uk_order_id` (`order_id`) USING BTREE,
                KEY `idx_paid_corp_id` (`paid_corp_id`) USING BTREE
              ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='订阅计费系统-企微商店渠道订单表';
        </sql>
    </changeSet>
</databaseChangeLog>