<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.vikadata.api.enterprise.wechat.mapper.WechatKeywordReplyMapper">

    <insert id="insertBatchWechatKeywordReply">
        INSERT INTO vika_wechat_keyword_reply(id, app_id, rule_name, match_mode, reply_mode, keyword, content, type, news_info)
        VALUES
        <foreach item="item" index="index" collection="list" separator=",">
            <trim prefix="(" suffix=")">
                #{item.id}, #{item.appId}, #{item.ruleName}, #{item.matchMode},
                #{item.replyMode},#{item.keyword},#{item.content}, #{item.type}, #{item.newsInfo}
            </trim>
        </foreach>
    </insert>

    <delete id="deleteKeywordReplies">
        delete from vika_wechat_keyword_reply where app_id = #{appId}
    </delete>

    <select id="findRepliesByKeyword" resultType="com.vikadata.entity.WechatKeywordReplyEntity">
        select * from vika_wechat_keyword_reply where app_id = #{appId} and keyword = #{keyword}
    </select>

</mapper>
