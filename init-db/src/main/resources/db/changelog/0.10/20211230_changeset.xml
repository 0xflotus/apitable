<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
	  http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.8.xsd">

    <changeSet id="V0.10-20211230-001" author="Shawn" labels="integration">
        <comment>增加飞书自建应用授权配置表</comment>
        <sql>
            CREATE TABLE `${table.prefix}social_feishu_auth_config`
            (
                `id`                       bigint(20) unsigned NOT NULL COMMENT '主键',
                `space_id`                 varchar(50) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci  NOT NULL COMMENT '空间ID',
                `client_id`                varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '应用ID',
                `client_secret`            varchar(255) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci NOT NULL COMMENT '应用密钥',
                `client_token`             varchar(64) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci  NOT NULL COMMENT '应用对应系统唯一授权标识',
                `event_encrypt_key`        varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci          DEFAULT NULL COMMENT '事件加密钥匙',
                `event_verification_token` varchar(100) CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci          DEFAULT NULL COMMENT '事件验证令牌',
                `is_enabled`               tinyint(1) unsigned DEFAULT '1' COMMENT '是否开启(0:否,1:是)',
                `is_deleted`               tinyint(1) unsigned DEFAULT '0' COMMENT '删除标记(0:否,1:是)',
                `created_by`               bigint(20) unsigned DEFAULT NULL COMMENT '创建用户',
                `updated_by`               bigint(20) unsigned DEFAULT NULL COMMENT '最后一次更新用户',
                `created_at`               timestamp                                                     NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT '创建时间',
                `updated_at`               timestamp NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT '更新时间',
                PRIMARY KEY (`id`) USING BTREE,
                KEY                        `idx_space_id` (`space_id`) USING BTREE,
                KEY                        `idx_client_token` (`client_token`) USING BTREE
            ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='第三方集成-飞书自建应用授权配置表';
        </sql>
    </changeSet>
</databaseChangeLog>